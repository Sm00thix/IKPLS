name: Test
description: Test

inputs:
  PYTHON_VERSION:
    description: test
    required: true

runs:
  using: "composite"
  steps:
    - name: Test
      run: |
        python3 -m pip install --upgrade pip
        python3 -m pip install --upgrade pandas
        python3 -m pip install poetry
        poetry install
        pip3 install -U "jax[cpu]" -f https://storage.googleapis.com/jax-releases/jax_cuda_releases.html
        python3 -m pip install flake8 pytest
        pip3 install pytest pytest-cov typeguard
        poetry run pytest tests --doctest-modules --junitxml=junit/test-results.xml --cov=ikpls/ --cov-report=xml --cov-report=html --typeguard-packages=ikpls/
      shell: bash
